{% extends "navbar.html" %}
{% block body %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Wishlist - E-commerce Store</title>
    <meta name="description" content="Your Wishlist" />
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <style>
     
      .wishlist-item {
        transition: all 0.3s ease;
      }
      .wishlist-item:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      }
      .remove-btn {
        position: absolute;
        top: 10px;
        right: 10px;
        background: rgba(255, 255, 255, 0.9);
        border: none;
        border-radius: 50%;
        width: 35px;
        height: 35px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #dc3545;
      }
      .remove-btn:hover {
        background: rgba(255, 255, 255, 1);
        color: #dc3545;
      }
      .summary-section {
        background: #f8f9fa;
        border-radius: 10px;
        padding: 20px;
        border: 1px solid #e9ecef;
      }

      button:focus, button:active, button:focus-visible {
        outline: none !important;
        box-shadow: none !important;
      }

      /* Remove blue underline and outline from links inside wishlist cards */
      .card a {
        text-decoration: none !important;
        border: none !important;
        outline: none !important;
        box-shadow: none !important;
        color: inherit;
      }
      
    </style>
  </head>

  <body>
  

    <!-- Wishlist Content -->
    <div class="container py-5">
      <div class="d-flex align-items-center justify-content-between mb-4">
        <h1 class="h2 fw-bold">My Wishlist</h1>
        <a href="{% url 'clear_wishlist' %}" class="btn btn-outline-danger" onclick="return confirm('Are you sure you want to clear your wishlist?');">
          <i class="bi bi-trash me-1"></i> Clear All
        </a>
      </div>

      <!-- Wishlist Items -->
      
      <div class="row g-4">
       {% if wishlist %}
        {% for i in wishlist %}

        <!-- Product 1 -->
        <div class="col-md-4 mb-4">
            <div class="card h-100">
                <a href="{% url 'remove_from_wishlist' i.pro.id %}" class="remove-btn" onclick="return confirm('Remove this item from wishlist?');" style="text-decoration:none;">
                    <i class="bi bi-x-lg"></i>
                </a>
                <a href={% url "product_detail"  i.pro.id %}>

                    <img
                      src="{{i.pro.image.url}}"
                      class="card-img-top"
                      style="height: 240px; object-fit: cover"
                      alt="Product "
                    />
                    <div class="card-body text-center py-1">                   
                      <h5 class="card-title fw-bold">{{i.pro.name}}</h5>
                    </div>
                    <div class="card-body py-0">                   

                      <p class="text-muted  mb-2">Category: {{i.pro.category}}</p>
                      <p class="card-text text-truncate">{{i.pro.description}}</p>
                      <div class="d-flex justify-content-between align-items-center">
                        <span class="h5 fw-bold mb-0">₹{{i.pro.price}}</span>
                        <small class="text-muted">In Stock</small>   
                      </div>                   
                      <div class="d-grid gap-2 mt-3">
                        <button class="btn btn-dark">Buy Now</button>
                        <button class="btn btn-dark">Add to Cart</button>
                      </div>
                    </div>
                </a>  
            </div>
        </div>
        {% endfor %}
       {% else %}
        <div class="col-12 text-center py-5">
          <h3>Your wishlist is empty.</h3>
          <a href="{% url 'index' %}" class="btn btn-primary mt-3">Continue Shopping</a>
        </div>
       {% endif %}
      </div>

      <div class="summary-section" style="background: white;  border: 1px solid #e9ecef; border-radius: 10px; padding: 20px; margin-top: 2rem;">
        <h4 class="fw-bold mb-4">Summary</h4>
        
        <div class="d-flex justify-content-between mb-3">
          <span class="fw-bold">Total:</span>
          <span class="fw-bold h5 mb-0">₹{{total}}</span>
        </div>
        
        <!-- <hr class="my-3"> -->
        
        <div class="d-grid">
          <button class="btn btn-success btn-lg">
            <i class="bi bi-bag-check me-2"></i>
            Checkout
          </button>
        </div>
        
        <div class="text-center mt-3">
          <small class="text-muted">
            <i class="bi bi-shield-check me-1"></i>
            Secure checkout guaranteed
          </small>
        </div>
      </div>
    </div>
      </div>
    </div>

   

    <!-- Bootstrap JS Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
{% endblock body %}